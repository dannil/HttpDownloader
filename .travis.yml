language: java
jdk:
- oraclejdk8
- oraclejdk7
os:
- linux
branches:
  only:
  - master
  - dev
  - coverity_scan
  
sudo: required

after_success:
  - mvn jacoco:report
  - curl http://www.jpm4j.org/install/script > jpmInstall.sh
  - sudo sh jpmInstall.sh
  - sudo jpm install com.codacy:codacy-coverage-reporter:assembly
  - codacy-coverage-reporter -l Java -r target/site/jacoco/jacoco.xml --projectToken $CODACY_PROJECT_TOKEN

env:
  global:
    secure: dYmG2FyDr6F6zsNORUUNalO7UEkbqu38l4+HJruK0ZRPBjteJQnmWvx6cyvYcHh3G2r/zY/SxNyuBDrJoDiSt72eB5IHwVlERQnLVywTx7i8tkynnnmFH4OEtW1H+k9Kh17fsN2SB1jCuYjx2023kfr9HeltAuV0pYHCbhxa0oM=